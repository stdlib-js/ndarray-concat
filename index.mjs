// Copyright (c) 2026 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import r from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@v0.2.1-esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-array-like-object@v0.2.2-esm/index.mjs";import e from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-promote-dtypes@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-normalize-index@v0.2.2-esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-ndims@v0.2.2-esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-empty@v0.3.0-esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-join@v0.1.1-esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/error-tools-fmtprodmsg@v0.2.2-esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-ndarray-like@v0.2.2-esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-ndarraylike2ndarray@esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-broadcast-array-except-dimensions@esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-shape@v0.2.2-esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-dtype@v0.2.2-esm/index.mjs";import j from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-order@v0.2.2-esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-defaults@v0.3.0-esm/index.mjs";import v from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@v0.2.2-esm/index.mjs";import{isPrimitive as u}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-negative-integer@v0.2.2-esm/index.mjs";import y from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@v0.2.2-esm/index.mjs";import g from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-indices-complement@esm/index.mjs";import b from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-data-buffer@v0.2.2-esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-ctor@v0.2.2-esm/index.mjs";import x from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-assign@v0.1.1-esm/index.mjs";import w from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-iter-stacks@esm/index.mjs";import E from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-assert-has-equal-values-indexed@esm/index.mjs";import T from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-assert-is-mostly-safe-data-type-cast@v0.2.2-esm/index.mjs";function k(r){var t,e;for(t=[],e=0;e<r.length;e++){if(!o(r[e]))throw new TypeError(d("invalid argument. First argument must be an array of ndarrays. Value: `%s`.",r[e]));t.push(m(r[e]))}return t}function F(r,t){var e,s,n,i,a;for(n=p(r[0],!1),a=0,i=1;i<r.length;i++)(s=p(r[i],!1)).length>n.length&&(n=s,a=i);for(e=[t],i=0;i<r.length;i++)i!==a&&(r[i]=l(r[i],n,e));return r}function V(r){var t,e;for(t=[],e=0;e<r.length;e++)t.push(h(r[e]));return t}function D(r,t){var e,s;for(e=p(r[0],!0),s=1;s<r.length;s++)e[t]+=p(r[s],!1)[t];return e}var O=f.get("order");function U(r){var t,e;for(t=j(r[0]),e=1;e<r.length;e++)if(j(r[e])!==t)return O;return t}function q(r,t){return v(t)?y(t,"dim")&&(r.dim=t.dim,!u(r.dim))?new TypeError(d("invalid option. `%s` option must be a negative integer. Option: `%s`.","dim",r.dim)):null:new TypeError(d("null2V",t))}function z(r,t,e){var s,n,i,a,d,o,m,l,f,v;if(1===(o=p(e,!1)).length){for(m=h(e),a=b(e),d=j(e),i=0,f=0;f<r.length;f++)o=p(r[f],!1),v=new c(m,a,o,[1],i,d),x([r[f],v]),i+=o[0];return e}for(n=w(e,g(o.length,[t])),f=0;f<r.length;f++)for(o=p(r[f],!1),s=w(r[f],g(o.length,[t]));!(l=s.next()).done;)x([l.value,n.next().value]);return e}function A(r){var o,m,l,p,h;if(!t(r)||r.length<1)throw new TypeError(d("invalid argument. First argument must be an array of ndarrays. Value: `%s`.",r));if(o={dim:-1},arguments.length>1&&(l=q(o,arguments[1])))throw l;if(m=F(m=k(r),o.dim),null===(p=e(V(m))))throw new Error(d("invalid argument. Unable to apply type promotion rules when resolving a data type to which the input ndarrays can be safely cast. Data types: [%s].",a(V(m),", ")));return z(m,h=s(o.dim,n(m[0])-1),i(D(m,h),{dtype:p,order:U(m)}))}function I(r,i){var l,j,f,v,u,y,g,b;if(!t(r)||r.length<1)throw new TypeError(d("invalid argument. First argument must be an array of ndarrays. Value: `%s`.",r));if(!o(i))throw new TypeError(d("nullF1",i));if(l={dim:-1},arguments.length>2&&(v=q(l,arguments[2])))throw v;if(j=k(r),f=m(i),j=F(j,l.dim),null===(g=e(V(j))))throw new Error(d("invalid argument. Unable to apply type promotion rules when resolving a data type to which the input ndarrays can be safely cast. Data types: [%s].",a(V(j),", ")));if(!T(g,h(f)))throw new Error(d("invalid argument. The list of input ndarrays cannot be safely cast to the data of the output ndarray. Input data types: [%s]. Output data type: %s.",a(V(j),", "),h(f)));if(y=D(j,b=s(l.dim,n(j[0])-1)),u=p(f,!1),!E(u,y))throw new TypeError(d("invalid argument. Second argument is not broadcast compatible with the list of input ndarrays. Array shape: (%s). Desired shape: (%s).",a(u,", "),a(y,", ")));return z(j,b,f),i}r(A,"assign",I);export{I as assign,A as default};
//# sourceMappingURL=index.mjs.map
