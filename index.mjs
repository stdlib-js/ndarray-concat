// Copyright (c) 2025 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import e from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@v0.2.1-esm/index.mjs";import{isPrimitive as r}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-negative-integer@v0.2.2-esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-array-like-object@v0.2.2-esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-promote-dtypes@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-normalize-index@v0.2.2-esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-ndims@v0.2.2-esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-empty@v0.3.0-esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-join@v0.1.1-esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/error-tools-fmtprodmsg@v0.2.2-esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-ndarray-like@v0.2.2-esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-ndarraylike2ndarray@esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-broadcast-array-except-dimensions@esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-shape@v0.2.2-esm/index.mjs";import j from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-dtype@v0.2.2-esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-order@v0.2.2-esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-defaults@v0.3.0-esm/index.mjs";import g from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-indices-complement@esm/index.mjs";import v from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-data-buffer@v0.2.2-esm/index.mjs";import y from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-ctor@v0.2.2-esm/index.mjs";import b from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-assign@v0.1.1-esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-iter-stacks@esm/index.mjs";import x from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-assert-has-equal-values-indexed@esm/index.mjs";import w from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-assert-is-mostly-safe-data-type-cast@v0.2.2-esm/index.mjs";function E(e){var r,t;for(r=[],t=0;t<e.length;t++){if(!m(e[t]))throw new TypeError(o("invalid argument. First argument must be an array of ndarrays. Value: `%s`.",e[t]));r.push(l(e[t]))}return r}function T(e,r){var t,s,n,a,i;for(n=p(e[0],!1),i=0,a=1;a<e.length;a++)(s=p(e[a],!1)).length>n.length&&(n=s,i=a);for(t=[r],a=0;a<e.length;a++)a!==i&&(e[a]=h(e[a],n,t));return e}function V(e){var r,t;for(r=[],t=0;t<e.length;t++)r.push(j(e[t]));return r}function k(e,r){var t,s;for(t=p(e[0],!0),s=1;s<e.length;s++)t[r]+=p(e[s],!1)[r];return t}var F=u.get("order");function D(e){var r,t;for(r=f(e[0]),t=1;t<e.length;t++)if(f(e[t])!==r)return F;return r}function S(e,r,t){var s,n,a,i,d,o,m,l,h,u;if(1===(o=p(t,!1)).length){for(m=j(t),i=v(t),d=f(t),a=0,h=0;h<e.length;h++)o=p(e[h],!1),u=new y(m,i,o,[1],a,d),b([e[h],u]),a+=o[0];return t}for(n=c(t,g(o.length,[r])),h=0;h<e.length;h++)for(o=p(e[h],!1),s=c(e[h],g(o.length,[r]));!(l=s.next()).done;)b([l.value,n.next().value]);return t}function U(e,m){var l,h,p;if(!t(e)||e.length<1)throw new TypeError(o("invalid argument. First argument must be an array of ndarrays. Value: `%s`.",e));if(arguments.length>1){if(!r(m))throw new TypeError(o("invalid argument. Second argument must be a negative integer. Value: `%s`.",m))}else m=-1;if(l=T(l=E(e),m),null===(h=s(V(l))))throw new Error(o("invalid argument. Unable to apply type promotion rules when resolving a data type to which the input ndarrays can be safely cast. Data types: [%s].",d(V(l),", ")));return S(l,p=n(m,a(l[0])-1),i(k(l,p),{dtype:h,order:D(l)}))}function q(e,i,h){var f,u,g,v,y,b;if(!t(e)||e.length<1)throw new TypeError(o("invalid argument. First argument must be an array of ndarrays. Value: `%s`.",e));if(!m(i))throw new TypeError(o("nullF1",i));if(arguments.length>2){if(!r(h))throw new TypeError(o("invalid argument. Third argument must be a negative integer. Value: `%s`.",h))}else h=-1;if(f=E(e),u=l(i),f=T(f,h),null===(y=s(V(f))))throw new Error(o("invalid argument. Unable to apply type promotion rules when resolving a data type to which the input ndarrays can be safely cast. Data types: [%s].",d(V(f),", ")));if(!w(y,j(u)))throw new Error(o("invalid argument. The list of input ndarrays cannot be safely cast to the data of the output ndarray. Input data types: [%s]. Output data type: %s.",d(V(f),", "),j(u)));if(v=k(f,b=n(h,a(f[0])-1)),g=p(u,!1),!x(g,v))throw new TypeError(o("invalid argument. Second argument is not broadcast compatible with the list of input ndarrays. Array shape: (%s). Desired shape: (%s).",d(g,", "),d(v,", ")));return S(f,b,u),i}e(U,"assign",q);export{q as assign,U as default};
//# sourceMappingURL=index.mjs.map
